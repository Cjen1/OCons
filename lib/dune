(library
 (name lib)
 (public_name ocaml-paxos)
 (libraries oUnit core core.uuid lwt yojson uri logs.lwt logs.fmt fmt.tty)
 (modules server acceptor types ballot pval utils leader_replica quorum))

(rule
 (targets message_api.ml message_api.mli)
 (deps message_api.capnp)
 (action
  (bash "capnp compile -o ocaml message_api.capnp")))

(env
 (dev
  (flags
   (:standard -warn-error -A))))
